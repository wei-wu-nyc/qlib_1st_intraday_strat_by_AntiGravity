# Intraday Trading Strategy Configuration

# Data Configuration
data:
  provider_uri: "/Users/wei/WorkMac/csv_to_qlib_pc/qlib_data/5min/us_stock"
  region: "us"
  freq: "5min"

# ETF Universe
instruments:
  symbols:
    - "DIA"
    - "SPY" 
    - "QQQ"
    - "IWM"
  benchmark: "SPY"

# Time Periods
periods:
  train:
    start: "2000-07-01"  # IWM starts 2000-06-28, so start from July 2000
    end: "2018-12-31"
  valid:
    start: "2019-01-01"
    end: "2021-12-31"
  test:
    start: "2022-01-01"
    end: "2025-12-31"

# Market Hours (US Eastern Time)
market:
  open_bar: "09:35"      # First bar of trading day
  close_bar: "16:00"     # Last bar of trading day
  position_close_bar: "15:55"  # Must close all positions by this time
  bars_per_day: 78       # Number of 5-min bars per trading day

# Trading Parameters
trading:
  # Label horizons (in bars, 1 bar = 5 min)
  primary_label_horizon: 24  # 120 minutes (2 hours)
  alternative_horizons:
    - 36  # 180 minutes (3 hours)
    # EOD uses ret_to_close label (handled separately)
  
  # Position limits
  max_positions: 1           # Trade only 1 ETF at a time (or CASH)
  allow_cash: true           # Can hold 100% cash when no signal
  
  # Entry/Exit
  last_entry_bar: "15:00"    # Latest time to enter new position
  min_bars_to_close: 6       # Minimum 30 min before forced close
  
  # Signal thresholds  
  entry_threshold: 0.0       # Minimum signal strength to enter (0 = always trade best)
  
# Feature Configuration
features:
  # Price/Return lookback periods (in bars)
  return_periods: [1, 3, 6, 12]
  
  # Technical indicator periods (in bars)
  rsi_periods: [6, 12, 24, 48]
  ma_periods: [6, 12, 24, 48]
  macd_params:
    fast: 12
    slow: 26
    signal: 9
  bollinger:
    period: 20
    std: 2
  atr_periods: [6, 12, 24]
  
  # Microstructure
  tick_periods: [1, 6, 12]

# Seasonality Features
seasonality:
  opening_minutes: 30        # First 30 min (6 bars) = opening
  closing_minutes: 30        # Last 30 min (6 bars) = closing
  month_boundary_days: 3     # Days to mark as month start/end
  holiday_proximity_days: 1  # Days before/after holiday
  include_economic_events: false  # CPI, NFP, GDP, FOMC (disabled to avoid look-ahead bias)

# Model Configuration
models:
  xgboost:
    n_estimators: 500
    max_depth: 6
    learning_rate: 0.05
    subsample: 0.8
    colsample_bytree: 0.8
    random_state: 42
    
  lightgbm:
    n_estimators: 500
    max_depth: 6
    learning_rate: 0.05
    num_leaves: 31
    random_state: 42

# Backtest Configuration
backtest:
  initial_capital: 1000000
  transaction_cost_bps: 1    # Basis points per trade (1bp realistic for liquid ETFs; industry standard is typically 2bps)
  
# Reporting
reporting:
  output_dir: "results"
  save_trades: true
  save_charts: true
